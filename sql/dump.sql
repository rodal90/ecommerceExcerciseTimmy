-- H2 2.2.224;
;             
CREATE USER IF NOT EXISTS "SAS" SALT '022d4450466e5def' HASH 'c0ef04456ca5b933e429b697a8d56ddc015ef883d8a993e722382269210c45e2' ADMIN;        
CREATE MEMORY TABLE "PUBLIC"."SPRING_SESSION"(
    "PRIMARY_ID" CHARACTER(36) NOT NULL,
    "SESSION_ID" CHARACTER(36) NOT NULL,
    "CREATION_TIME" BIGINT NOT NULL,
    "LAST_ACCESS_TIME" BIGINT NOT NULL,
    "MAX_INACTIVE_INTERVAL" INTEGER NOT NULL,
    "EXPIRY_TIME" BIGINT NOT NULL,
    "PRINCIPAL_NAME" CHARACTER VARYING(100)
);         
ALTER TABLE "PUBLIC"."SPRING_SESSION" ADD CONSTRAINT "PUBLIC"."SPRING_SESSION_PK" PRIMARY KEY("PRIMARY_ID");  
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.SPRING_SESSION;          
INSERT INTO "PUBLIC"."SPRING_SESSION" VALUES
('735a7323-5026-4647-980c-6bf6872db543', 'a279f546-47ab-460b-a8bc-938e52674754', 1730110901647, 1730110960402, 1800, 1730112760402, 'ana');     
CREATE UNIQUE NULLS DISTINCT INDEX "PUBLIC"."SPRING_SESSION_IX1" ON "PUBLIC"."SPRING_SESSION"("SESSION_ID" NULLS FIRST);      
CREATE INDEX "PUBLIC"."SPRING_SESSION_IX2" ON "PUBLIC"."SPRING_SESSION"("EXPIRY_TIME" NULLS FIRST);           
CREATE INDEX "PUBLIC"."SPRING_SESSION_IX3" ON "PUBLIC"."SPRING_SESSION"("PRINCIPAL_NAME" NULLS FIRST);        
CREATE MEMORY TABLE "PUBLIC"."SPRING_SESSION_ATTRIBUTES"(
    "SESSION_PRIMARY_ID" CHARACTER(36) NOT NULL,
    "ATTRIBUTE_NAME" CHARACTER VARYING(200) NOT NULL,
    "ATTRIBUTE_BYTES" BINARY VARYING NOT NULL
);         
ALTER TABLE "PUBLIC"."SPRING_SESSION_ATTRIBUTES" ADD CONSTRAINT "PUBLIC"."SPRING_SESSION_ATTRIBUTES_PK" PRIMARY KEY("SESSION_PRIMARY_ID", "ATTRIBUTE_NAME");  
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.SPRING_SESSION_ATTRIBUTES;               
INSERT INTO "PUBLIC"."SPRING_SESSION_ATTRIBUTES" VALUES
('735a7323-5026-4647-980c-6bf6872db543', 'org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository.CSRF_TOKEN', X'aced0005737200366f72672e737072696e676672616d65776f726b2e73656375726974792e7765622e637372662e44656661756c7443737266546f6b656e5aefb7c82fa2fbd50200034c000a6865616465724e616d657400124c6a6176612f6c616e672f537472696e673b4c000d706172616d657465724e616d6571007e00014c0005746f6b656e71007e0001787074000c582d435352462d544f4b454e7400055f6373726674002438346337616230342d313933612d343061632d383731612d343939326631396466366662'),
('735a7323-5026-4647-980c-6bf6872db543', 'SPRING_SECURITY_CONTEXT', X'aced00057372003d6f72672e737072696e676672616d65776f726b2e73656375726974792e636f72652e636f6e746578742e5365637572697479436f6e74657874496d706c000000000000026c0200014c000e61757468656e7469636174696f6e7400324c6f72672f737072696e676672616d65776f726b2f73656375726974792f636f72652f41757468656e7469636174696f6e3b78707372004f6f72672e737072696e676672616d65776f726b2e73656375726974792e61757468656e7469636174696f6e2e557365726e616d6550617373776f726441757468656e7469636174696f6e546f6b656e000000000000026c0200024c000b63726564656e7469616c737400124c6a6176612f6c616e672f4f626a6563743b4c00097072696e636970616c71007e0004787200476f72672e737072696e676672616d65776f726b2e73656375726974792e61757468656e7469636174696f6e2e416273747261637441757468656e7469636174696f6e546f6b656ed3aa287e6e47640e0200035a000d61757468656e746963617465644c000b617574686f7269746965737400164c6a6176612f7574696c2f436f6c6c656374696f6e3b4c000764657461696c7371007e0004787001737200266a6176612e7574696c2e436f6c6c656374696f6e7324556e6d6f6469666961626c654c697374fc0f2531b5ec8e100200014c00046c6973747400104c6a6176612f7574696c2f4c6973743b7872002c6a6176612e7574696c2e436f6c6c656374696f6e7324556e6d6f6469666961626c65436f6c6c656374696f6e19420080cb5ef71e0200014c00016371007e00067870737200136a6176612e7574696c2e41727261794c6973747881d21d99c7619d03000149000473697a65787000000002770400000002737200426f72672e737072696e676672616d65776f726b2e73656375726974792e636f72652e617574686f726974792e53696d706c654772616e746564417574686f72697479000000000000026c0200014c0004726f6c657400124c6a6176612f6c616e672f537472696e673b7870740004555345527371007e000e74000541444d494e7871007e000d70707372001e636f6d2e636f72652e74696d6d792e646174612e6d6f64656c2e5573657200000000000000010200094c0005656d61696c71007e000f4c0007656e61626c65647400134c6a6176612f6c616e672f426f6f6c65616e3b4c0011657870697279446174654163636f756e747400154c6a6176612f74696d652f4c6f63616c446174653b4c00156578706972794461746543726564656e7469616c7371007e00164c000866756c6c6e616d6571007e000f4c000d6c6f636b65644163636f756e7471007e00154c000870617373776f726471007e000f4c0007726f6c6553657474000f4c6a6176612f7574696c2f5365743b4c0008757365726e616d6571007e000f787074000d616e6140676d61696c2e636f6d737200116a6176612e6c616e672e426f6f6c65616ecd207280d59cfaee0200015a000576616c75657870017372000d6a6176612e74696d652e536572955d84ba1b2248b20c00007870770703000007e80b1c787371007e001c770703000007e80b1c78740009416e6120506572657a7371007e001a0074003c243261243132246c4e6e567142586e5a6a6c3343396138646e426b7175725758744d6730704f6a517159466c443736584a6846302e57696f365858717372002a6f72672e68696265726e6174652e636f6c6c656374696f6e2e7370692e50657273697374656e745365749bb9c697c117ce6b0200014c000373657471007e0017787200396f72672e68696265726e6174652e636f6c6c656374696f6e2e7370692e416273747261637450657273697374656e74436f6c6c656374696f6e33a4b04a3cf0460c02000b5a001b616c6c6f774c6f61644f7574736964655472616e73616374696f6e49000a63616368656453697a655a000564697274795a000e656c656d656e7452656d6f7665645a000b696e697469616c697a65645a000d697354656d7053657373696f6e4c00036b657971007e00044c00056f776e657271007e00044c0004726f6c6571007e000f4c001273657373696f6e466163746f72795575696471007e000f4c000e73746f726564536e617073686f747400164c6a6176612f696f2f53657269616c697a61626c653b787000ffffffff00000100740003616e6171007e0018740026636f6d2e636f72652e74696d6d792e646174612e6d6f64656c2e557365722e726f6c6553657470737200116a6176612e7574696c2e486173684d61700507dac1c31660d103000246000a6c6f6164466163746f724900097468726573686f6c6478703f4000000000000c770800000010000000027372001e636f6d2e636f72652e74696d6d792e646174612e6d6f64656c2e526f6c6500000000000000010200014c0008726f6c656e616d6571007e000f787071007e001171007e002b7371007e002a71007e001371007e002c78737200116a6176612e7574696c2e48617368536574ba44859596b8b7340300007870770c000000103f4000000000000271007e002b71007e002c7871007e0026'); 
CREATE MEMORY TABLE "PUBLIC"."CUSTOMER"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "ADDRESS" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255),
    "PHONE" CHARACTER VARYING(255),
    "VATNUMBER" CHARACTER VARYING(255)
);               
ALTER TABLE "PUBLIC"."CUSTOMER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CUSTOMER;
CREATE MEMORY TABLE "PUBLIC"."CUSTOMER_CONTACT"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "IDCUSTOMER" INTEGER,
    "EMAIL" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255) NOT NULL,
    "OBSERVATIONS" CHARACTER VARYING(255),
    "PHONE" CHARACTER VARYING(255)
);  
ALTER TABLE "PUBLIC"."CUSTOMER_CONTACT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("ID");             
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.CUSTOMER_CONTACT;        
CREATE MEMORY TABLE "PUBLIC"."ROLES"(
    "ROLENAME" CHARACTER VARYING(255) NOT NULL
);     
ALTER TABLE "PUBLIC"."ROLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ROLENAME");  
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.ROLES;   
INSERT INTO "PUBLIC"."ROLES" VALUES
('ADMIN'),
('USER'),
('MANAGER');      
CREATE MEMORY TABLE "PUBLIC"."USERS"(
    "ENABLED" BOOLEAN,
    "EXPIRYDATEACCOUNT" DATE,
    "EXPIRYDATECREDENTIALS" DATE,
    "LOCKEDACCOUNT" BOOLEAN,
    "EMAIL" CHARACTER VARYING(255),
    "FULLNAME" CHARACTER VARYING(255),
    "PASSWORD" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255) NOT NULL
);        
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4D" PRIMARY KEY("USERNAME"); 
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.USERS;   
INSERT INTO "PUBLIC"."USERS" VALUES
(TRUE, DATE '2024-11-28', DATE '2024-11-28', FALSE, 'ana@gmail.com', 'Ana Perez', '$2a$12$lNnVqBXnZjl3C9a8dnBkqurWXtMg0pOjQqYFlD76XJhF0.Wio6XXq', 'ana'),
(TRUE, DATE '2024-11-28', DATE '2024-11-28', FALSE, 'luis@gmail.com', 'luis Gomez', '$2a$12$V7GPq65lUeKLc.sFDPUhi.OUAg9uMWQJvxvXSgXsj/te/pucKozzS', 'luis'),
(TRUE, DATE '2024-11-28', DATE '2024-11-28', FALSE, 'evano@gmail.com', 'Evano No', '$2a$12$AD4HVFERi3n44CtWt4q0aeSQI1.yIQvXhM0./d4dnhMxtw2XQmGaO', 'evano');    
CREATE MEMORY TABLE "PUBLIC"."USERS_HAS_ROLES"(
    "USER_USERNAME" CHARACTER VARYING(255) NOT NULL,
    "ROLESET_ROLENAME" CHARACTER VARYING(255) NOT NULL
);             
ALTER TABLE "PUBLIC"."USERS_HAS_ROLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_9" PRIMARY KEY("USER_USERNAME", "ROLESET_ROLENAME");               
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.USERS_HAS_ROLES;         
INSERT INTO "PUBLIC"."USERS_HAS_ROLES" VALUES
('ana', 'USER'),
('ana', 'ADMIN'),
('evano', 'MANAGER');     
ALTER TABLE "PUBLIC"."SPRING_SESSION_ATTRIBUTES" ADD CONSTRAINT "PUBLIC"."SPRING_SESSION_ATTRIBUTES_FK" FOREIGN KEY("SESSION_PRIMARY_ID") REFERENCES "PUBLIC"."SPRING_SESSION"("PRIMARY_ID") ON DELETE CASCADE NOCHECK;       
ALTER TABLE "PUBLIC"."USERS_HAS_ROLES" ADD CONSTRAINT "PUBLIC"."FK40JY793CG5KBTS0087CM4ENGD" FOREIGN KEY("ROLESET_ROLENAME") REFERENCES "PUBLIC"."ROLES"("ROLENAME") NOCHECK; 
ALTER TABLE "PUBLIC"."CUSTOMER_CONTACT" ADD CONSTRAINT "PUBLIC"."FK3X9HLFBVHPKCA4AVLHE6DT7F7" FOREIGN KEY("IDCUSTOMER") REFERENCES "PUBLIC"."CUSTOMER"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."USERS_HAS_ROLES" ADD CONSTRAINT "PUBLIC"."FKFY7X7IL32RR6KYEOS1VA1FVH5" FOREIGN KEY("USER_USERNAME") REFERENCES "PUBLIC"."USERS"("USERNAME") NOCHECK;    
